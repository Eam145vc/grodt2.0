{"ast":null,"code":"var _jsxFileName = \"C:\\\\tower-defense-game\\\\client\\\\src\\\\components\\\\Game\\\\GamePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GamePage = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const socketRef = useRef(null);\n  const [gameState, setGameState] = useState({\n    lanes: [{\n      id: 1,\n      baseHealth: 100,\n      enemies: [],\n      bullets: [],\n      enemyProjectiles: [],\n      isGameOver: false\n    }, {\n      id: 2,\n      baseHealth: 100,\n      enemies: [],\n      bullets: [],\n      enemyProjectiles: [],\n      isGameOver: false\n    }, {\n      id: 3,\n      baseHealth: 100,\n      enemies: [],\n      bullets: [],\n      enemyProjectiles: [],\n      isGameOver: false\n    }, {\n      id: 4,\n      baseHealth: 100,\n      enemies: [],\n      bullets: [],\n      enemyProjectiles: [],\n      isGameOver: false\n    }],\n    waveSystem: {\n      isActive: false,\n      isPaused: false,\n      currentWave: 0,\n      timeRemaining: 15,\n      maxTime: 15\n    },\n    globalGameOver: false,\n    winner: null,\n    enemyTypes: {}\n  });\n  const [isConnected, setIsConnected] = useState(false);\n  useEffect(() => {\n    socketRef.current = io('http://localhost:5000');\n    socketRef.current.on('connect', () => {\n      setIsConnected(true);\n      console.log('Conectado al servidor');\n    });\n    socketRef.current.on('disconnect', () => {\n      setIsConnected(false);\n      console.log('Desconectado del servidor');\n    });\n    socketRef.current.on('gameState', newGameState => {\n      setGameState(newGameState);\n    });\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const drawGame = () => {\n      // Limpiar canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Dibujar fondo con gradiente\n      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n      gradient.addColorStop(0, '#0a0a0a');\n      gradient.addColorStop(0.3, '#1a1a2e');\n      gradient.addColorStop(0.7, '#16213e');\n      gradient.addColorStop(1, '#0f3460');\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      const laneWidth = canvas.width / 4;\n\n      // Dibujar carriles\n      gameState.lanes.forEach((lane, laneIndex) => {\n        const x = laneIndex * laneWidth;\n        const laneX = x + laneWidth / 2;\n\n        // Fondo del carril\n        if (lane.isGameOver) {\n          ctx.fillStyle = 'rgba(231, 76, 60, 0.15)';\n          ctx.fillRect(x, 0, laneWidth, canvas.height);\n        }\n\n        // L칤neas separadoras con efecto ne칩n\n        ctx.strokeStyle = lane.isGameOver ? '#e74c3c' : '#00d4ff';\n        ctx.lineWidth = 2;\n        ctx.shadowColor = lane.isGameOver ? '#e74c3c' : '#00d4ff';\n        ctx.shadowBlur = 8;\n        ctx.beginPath();\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, canvas.height);\n        ctx.stroke();\n        ctx.shadowBlur = 0;\n\n        // N칰meros de carril\n        ctx.fillStyle = lane.isGameOver ? '#e74c3c' : '#00ff88';\n        ctx.font = 'bold 20px \"Courier New\"';\n        ctx.textAlign = 'center';\n        ctx.shadowColor = ctx.fillStyle;\n        ctx.shadowBlur = 6;\n        ctx.fillText(`P${laneIndex + 1}`, laneX, 30);\n        ctx.shadowBlur = 0;\n\n        // Vida de la base con barra visual\n        const baseY = canvas.height - 60;\n        const barWidth = laneWidth - 20;\n        const barHeight = 12;\n        const barX = x + 10;\n\n        // Fondo de la barra\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';\n        ctx.fillRect(barX, baseY, barWidth, barHeight);\n\n        // Barra de vida\n        const healthPercent = lane.baseHealth / 100;\n        const healthWidth = barWidth * healthPercent;\n        const healthColor = healthPercent > 0.6 ? '#00ff88' : healthPercent > 0.3 ? '#ffaa00' : '#ff4444';\n        ctx.fillStyle = healthColor;\n        ctx.fillRect(barX, baseY, healthWidth, barHeight);\n\n        // Texto de vida\n        ctx.fillStyle = '#ffffff';\n        ctx.font = 'bold 12px Arial';\n        ctx.fillText(`${lane.baseHealth}/100`, laneX, baseY + 25);\n\n        // Game Over overlay para carril\n        if (lane.isGameOver) {\n          ctx.fillStyle = 'rgba(231, 76, 60, 0.8)';\n          ctx.fillRect(x, 0, laneWidth, canvas.height);\n          ctx.fillStyle = '#ffffff';\n          ctx.font = 'bold 16px Arial';\n          ctx.textAlign = 'center';\n          ctx.shadowColor = '#000000';\n          ctx.shadowBlur = 5;\n          ctx.save();\n          ctx.translate(laneX, canvas.height / 2);\n          ctx.rotate(-Math.PI / 2);\n          ctx.fillText('ELIMINADO', 0, 0);\n          ctx.restore();\n          ctx.shadowBlur = 0;\n        }\n\n        // Dibujar enemigos con diferentes estilos por tipo\n        if (lane.enemies && Array.isArray(lane.enemies)) {\n          lane.enemies.forEach(enemy => {\n            if (enemy.alive) {\n              var _enemy$type;\n              const enemyType = gameState.enemyTypes[(_enemy$type = enemy.type) === null || _enemy$type === void 0 ? void 0 : _enemy$type.toUpperCase()] || {\n                color: '#e74c3c',\n                size: 15\n              };\n\n              // Sombra del enemigo\n              ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\n              ctx.beginPath();\n              ctx.arc(laneX + 2, enemy.y + 2, enemyType.size + 2, 0, Math.PI * 2);\n              ctx.fill();\n\n              // Cuerpo del enemigo con color espec칤fico\n              ctx.fillStyle = enemyType.color;\n              ctx.shadowColor = enemyType.color;\n              ctx.shadowBlur = 5;\n              ctx.beginPath();\n\n              // Formas espec칤ficas por tipo\n              if (enemy.type === 'tank') {\n                // Tanque - rect치ngulo\n                ctx.fillRect(laneX - enemyType.size / 2, enemy.y - enemyType.size / 2, enemyType.size, enemyType.size);\n              } else if (enemy.type === 'mini') {\n                // Mini - tri치ngulo peque침o\n                ctx.beginPath();\n                ctx.moveTo(laneX, enemy.y - enemyType.size / 2);\n                ctx.lineTo(laneX - enemyType.size / 2, enemy.y + enemyType.size / 2);\n                ctx.lineTo(laneX + enemyType.size / 2, enemy.y + enemyType.size / 2);\n                ctx.closePath();\n                ctx.fill();\n              } else if (enemy.type === 'sniper') {\n                // Sniper - diamante\n                ctx.beginPath();\n                ctx.moveTo(laneX, enemy.y - enemyType.size / 2);\n                ctx.lineTo(laneX + enemyType.size / 2, enemy.y);\n                ctx.lineTo(laneX, enemy.y + enemyType.size / 2);\n                ctx.lineTo(laneX - enemyType.size / 2, enemy.y);\n                ctx.closePath();\n                ctx.fill();\n              } else if (enemy.type === 'boss') {\n                // Boss - estrella\n                ctx.beginPath();\n                for (let i = 0; i < 8; i++) {\n                  const angle = i * Math.PI / 4;\n                  const radius = i % 2 === 0 ? enemyType.size : enemyType.size / 2;\n                  const px = laneX + Math.cos(angle) * radius;\n                  const py = enemy.y + Math.sin(angle) * radius;\n                  if (i === 0) ctx.moveTo(px, py);else ctx.lineTo(px, py);\n                }\n                ctx.closePath();\n                ctx.fill();\n              } else {\n                // B치sico y Especial 1 - c칤rculo\n                ctx.arc(laneX, enemy.y, enemyType.size, 0, Math.PI * 2);\n                ctx.fill();\n              }\n              ctx.shadowBlur = 0;\n\n              // Borde del enemigo\n              ctx.strokeStyle = '#ffffff';\n              ctx.lineWidth = 1;\n              ctx.stroke();\n\n              // NUEVA SECCI칍N: Solo n칰meros de vida arriba del enemigo\n              if (enemy.health && enemy.maxHealth) {\n                const healthY = enemy.y - enemyType.size - 15; // Arriba del enemigo\n\n                // Fondo semi-transparente para el n칰mero\n                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n                ctx.font = 'bold 12px Arial';\n                ctx.textAlign = 'center';\n                const textWidth = ctx.measureText(enemy.health).width;\n                ctx.fillRect(laneX - textWidth / 2 - 3, healthY - 10, textWidth + 6, 14);\n\n                // N칰mero de vida con color seg칰n porcentaje\n                const healthPercent = enemy.health / enemy.maxHealth;\n                if (healthPercent > 0.7) {\n                  ctx.fillStyle = '#00ff00'; // Verde\n                } else if (healthPercent > 0.4) {\n                  ctx.fillStyle = '#ffaa00'; // Amarillo\n                } else {\n                  ctx.fillStyle = '#ff4444'; // Rojo\n                }\n\n                // Sombra del texto para mejor legibilidad\n                ctx.shadowColor = '#000000';\n                ctx.shadowBlur = 2;\n                ctx.shadowOffsetX = 1;\n                ctx.shadowOffsetY = 1;\n                ctx.fillText(enemy.health, laneX, healthY);\n\n                // Limpiar sombra\n                ctx.shadowBlur = 0;\n                ctx.shadowOffsetX = 0;\n                ctx.shadowOffsetY = 0;\n              }\n            }\n          });\n        }\n\n        // Dibujar proyectiles de enemigos (sniper)\n        if (lane.enemyProjectiles && Array.isArray(lane.enemyProjectiles)) {\n          lane.enemyProjectiles.forEach(projectile => {\n            if (projectile.alive) {\n              // Proyectil del sniper - rojo\n              ctx.fillStyle = '#ff0066';\n              ctx.shadowColor = '#ff0066';\n              ctx.shadowBlur = 10;\n              ctx.beginPath();\n              ctx.arc(laneX, projectile.y, 4, 0, Math.PI * 2);\n              ctx.fill();\n\n              // N칰cleo brillante\n              ctx.fillStyle = '#ffffff';\n              ctx.beginPath();\n              ctx.arc(laneX - 1, projectile.y - 1, 2, 0, Math.PI * 2);\n              ctx.fill();\n              ctx.shadowBlur = 0;\n            }\n          });\n        }\n\n        // Dibujar balas de defensa\n        if (lane.bullets && Array.isArray(lane.bullets)) {\n          lane.bullets.forEach(bullet => {\n            if (bullet.alive) {\n              // Efecto de trail\n              ctx.fillStyle = 'rgba(255, 215, 0, 0.3)';\n              ctx.beginPath();\n              ctx.arc(laneX, bullet.y + 8, 6, 0, Math.PI * 2);\n              ctx.fill();\n\n              // Bala principal\n              ctx.fillStyle = '#ffd700';\n              ctx.shadowColor = '#ffd700';\n              ctx.shadowBlur = 12;\n              ctx.beginPath();\n              ctx.arc(laneX, bullet.y, 5, 0, Math.PI * 2);\n              ctx.fill();\n\n              // N칰cleo brillante\n              ctx.fillStyle = '#ffffff';\n              ctx.beginPath();\n              ctx.arc(laneX - 2, bullet.y - 2, 2, 0, Math.PI * 2);\n              ctx.fill();\n              ctx.shadowBlur = 0;\n            }\n          });\n        }\n      });\n\n      // L칤nea de las bases con efecto ne칩n\n      ctx.strokeStyle = '#00ff88';\n      ctx.lineWidth = 4;\n      ctx.shadowColor = '#00ff88';\n      ctx.shadowBlur = 15;\n      ctx.beginPath();\n      ctx.moveTo(0, canvas.height - 80);\n      ctx.lineTo(canvas.width, canvas.height - 80);\n      ctx.stroke();\n      ctx.shadowBlur = 0;\n    };\n    drawGame();\n  }, [gameState]);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const getEnemyCount = () => {\n    return gameState.lanes.reduce((total, lane) => {\n      return total + (lane.enemies ? lane.enemies.length : 0);\n    }, 0);\n  };\n  const getActiveProjectiles = () => {\n    return gameState.lanes.reduce((total, lane) => {\n      return total + (lane.enemyProjectiles ? lane.enemyProjectiles.length : 0);\n    }, 0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-viewport\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-container-vertical\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hud top-hud\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hud-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hud-label\",\n            children: \"Oleada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hud-value\",\n            children: gameState.waveSystem.currentWave\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-canvas-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: 400,\n          height: 600,\n          className: \"game-canvas-modern\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), gameState.globalGameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"winner-overlay\",\n          children: gameState.winner ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"winner-title\",\n              children: \"\\uD83C\\uDFC6 \\xA1VICTORIA!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"winner-subtitle\",\n              children: [\"Jugador \", gameState.winner, \" Sobrevive\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"winner-score\",\n              children: [\"Oleadas Completadas: \", gameState.waveSystem.currentWave]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"winner-title\",\n              children: \"\\uD83D\\uDC80 ANIQUILACI\\xD3N TOTAL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"winner-subtitle\",\n              children: \"Todos los defensores han ca\\xEDdo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"winner-score\",\n              children: [\"Oleadas Resistidas: \", gameState.waveSystem.currentWave]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hud bottom-hud\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hud-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hud-label\",\n            children: \"Tiempo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hud-value\",\n            children: formatTime(gameState.waveSystem.timeRemaining)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 334,\n    columnNumber: 5\n  }, this);\n};\n_s(GamePage, \"MBKDmcjJf4aKjzkDc47BfIIZ4fE=\");\n_c = GamePage;\nexport default GamePage;\nvar _c;\n$RefreshReg$(_c, \"GamePage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","jsxDEV","_jsxDEV","Fragment","_Fragment","GamePage","_s","canvasRef","socketRef","gameState","setGameState","lanes","id","baseHealth","enemies","bullets","enemyProjectiles","isGameOver","waveSystem","isActive","isPaused","currentWave","timeRemaining","maxTime","globalGameOver","winner","enemyTypes","isConnected","setIsConnected","current","on","console","log","newGameState","disconnect","canvas","ctx","getContext","drawGame","clearRect","width","height","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","laneWidth","forEach","lane","laneIndex","x","laneX","strokeStyle","lineWidth","shadowColor","shadowBlur","beginPath","moveTo","lineTo","stroke","font","textAlign","fillText","baseY","barWidth","barHeight","barX","healthPercent","healthWidth","healthColor","save","translate","rotate","Math","PI","restore","Array","isArray","enemy","alive","_enemy$type","enemyType","type","toUpperCase","color","size","arc","y","fill","closePath","i","angle","radius","px","cos","py","sin","health","maxHealth","healthY","textWidth","measureText","shadowOffsetX","shadowOffsetY","projectile","bullet","formatTime","seconds","mins","floor","secs","toString","padStart","getEnemyCount","reduce","total","length","getActiveProjectiles","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["C:/tower-defense-game/client/src/components/Game/GamePage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nconst GamePage = () => {\r\n  const canvasRef = useRef(null);\r\n  const socketRef = useRef(null);\r\n  const [gameState, setGameState] = useState({\r\n    lanes: [\r\n      { id: 1, baseHealth: 100, enemies: [], bullets: [], enemyProjectiles: [], isGameOver: false },\r\n      { id: 2, baseHealth: 100, enemies: [], bullets: [], enemyProjectiles: [], isGameOver: false },\r\n      { id: 3, baseHealth: 100, enemies: [], bullets: [], enemyProjectiles: [], isGameOver: false },\r\n      { id: 4, baseHealth: 100, enemies: [], bullets: [], enemyProjectiles: [], isGameOver: false }\r\n    ],\r\n    waveSystem: {\r\n      isActive: false,\r\n      isPaused: false,\r\n      currentWave: 0,\r\n      timeRemaining: 15,\r\n      maxTime: 15\r\n    },\r\n    globalGameOver: false,\r\n    winner: null,\r\n    enemyTypes: {}\r\n  });\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    socketRef.current = io('http://localhost:5000');\r\n    \r\n    socketRef.current.on('connect', () => {\r\n      setIsConnected(true);\r\n      console.log('Conectado al servidor');\r\n    });\r\n    \r\n    socketRef.current.on('disconnect', () => {\r\n      setIsConnected(false);\r\n      console.log('Desconectado del servidor');\r\n    });\r\n    \r\n    socketRef.current.on('gameState', (newGameState) => {\r\n      setGameState(newGameState);\r\n    });\r\n    \r\n    return () => {\r\n      if (socketRef.current) {\r\n        socketRef.current.disconnect();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    const drawGame = () => {\r\n      // Limpiar canvas\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      \r\n      // Dibujar fondo con gradiente\r\n      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n      gradient.addColorStop(0, '#0a0a0a');\r\n      gradient.addColorStop(0.3, '#1a1a2e');\r\n      gradient.addColorStop(0.7, '#16213e');\r\n      gradient.addColorStop(1, '#0f3460');\r\n      ctx.fillStyle = gradient;\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      \r\n      const laneWidth = canvas.width / 4;\r\n      \r\n      // Dibujar carriles\r\n      gameState.lanes.forEach((lane, laneIndex) => {\r\n        const x = laneIndex * laneWidth;\r\n        const laneX = x + laneWidth / 2;\r\n        \r\n        // Fondo del carril\r\n        if (lane.isGameOver) {\r\n          ctx.fillStyle = 'rgba(231, 76, 60, 0.15)';\r\n          ctx.fillRect(x, 0, laneWidth, canvas.height);\r\n        }\r\n        \r\n        // L칤neas separadoras con efecto ne칩n\r\n        ctx.strokeStyle = lane.isGameOver ? '#e74c3c' : '#00d4ff';\r\n        ctx.lineWidth = 2;\r\n        ctx.shadowColor = lane.isGameOver ? '#e74c3c' : '#00d4ff';\r\n        ctx.shadowBlur = 8;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, canvas.height);\r\n        ctx.stroke();\r\n        ctx.shadowBlur = 0;\r\n        \r\n        // N칰meros de carril\r\n        ctx.fillStyle = lane.isGameOver ? '#e74c3c' : '#00ff88';\r\n        ctx.font = 'bold 20px \"Courier New\"';\r\n        ctx.textAlign = 'center';\r\n        ctx.shadowColor = ctx.fillStyle;\r\n        ctx.shadowBlur = 6;\r\n        ctx.fillText(`P${laneIndex + 1}`, laneX, 30);\r\n        ctx.shadowBlur = 0;\r\n        \r\n        // Vida de la base con barra visual\r\n        const baseY = canvas.height - 60;\r\n        const barWidth = laneWidth - 20;\r\n        const barHeight = 12;\r\n        const barX = x + 10;\r\n        \r\n        // Fondo de la barra\r\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';\r\n        ctx.fillRect(barX, baseY, barWidth, barHeight);\r\n        \r\n        // Barra de vida\r\n        const healthPercent = lane.baseHealth / 100;\r\n        const healthWidth = barWidth * healthPercent;\r\n        const healthColor = healthPercent > 0.6 ? '#00ff88' : \r\n                           healthPercent > 0.3 ? '#ffaa00' : '#ff4444';\r\n        \r\n        ctx.fillStyle = healthColor;\r\n        ctx.fillRect(barX, baseY, healthWidth, barHeight);\r\n        \r\n        // Texto de vida\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.font = 'bold 12px Arial';\r\n        ctx.fillText(`${lane.baseHealth}/100`, laneX, baseY + 25);\r\n        \r\n        // Game Over overlay para carril\r\n        if (lane.isGameOver) {\r\n          ctx.fillStyle = 'rgba(231, 76, 60, 0.8)';\r\n          ctx.fillRect(x, 0, laneWidth, canvas.height);\r\n          \r\n          ctx.fillStyle = '#ffffff';\r\n          ctx.font = 'bold 16px Arial';\r\n          ctx.textAlign = 'center';\r\n          ctx.shadowColor = '#000000';\r\n          ctx.shadowBlur = 5;\r\n          ctx.save();\r\n          ctx.translate(laneX, canvas.height / 2);\r\n          ctx.rotate(-Math.PI / 2);\r\n          ctx.fillText('ELIMINADO', 0, 0);\r\n          ctx.restore();\r\n          ctx.shadowBlur = 0;\r\n        }\r\n        \r\n        // Dibujar enemigos con diferentes estilos por tipo\r\n        if (lane.enemies && Array.isArray(lane.enemies)) {\r\n          lane.enemies.forEach(enemy => {\r\n            if (enemy.alive) {\r\n              const enemyType = gameState.enemyTypes[enemy.type?.toUpperCase()] || \r\n                              { color: '#e74c3c', size: 15 };\r\n              \r\n              // Sombra del enemigo\r\n              ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\r\n              ctx.beginPath();\r\n              ctx.arc(laneX + 2, enemy.y + 2, enemyType.size + 2, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              \r\n              // Cuerpo del enemigo con color espec칤fico\r\n              ctx.fillStyle = enemyType.color;\r\n              ctx.shadowColor = enemyType.color;\r\n              ctx.shadowBlur = 5;\r\n              ctx.beginPath();\r\n              \r\n              // Formas espec칤ficas por tipo\r\n              if (enemy.type === 'tank') {\r\n                // Tanque - rect치ngulo\r\n                ctx.fillRect(laneX - enemyType.size/2, enemy.y - enemyType.size/2, \r\n                            enemyType.size, enemyType.size);\r\n              } else if (enemy.type === 'mini') {\r\n                // Mini - tri치ngulo peque침o\r\n                ctx.beginPath();\r\n                ctx.moveTo(laneX, enemy.y - enemyType.size/2);\r\n                ctx.lineTo(laneX - enemyType.size/2, enemy.y + enemyType.size/2);\r\n                ctx.lineTo(laneX + enemyType.size/2, enemy.y + enemyType.size/2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n              } else if (enemy.type === 'sniper') {\r\n                // Sniper - diamante\r\n                ctx.beginPath();\r\n                ctx.moveTo(laneX, enemy.y - enemyType.size/2);\r\n                ctx.lineTo(laneX + enemyType.size/2, enemy.y);\r\n                ctx.lineTo(laneX, enemy.y + enemyType.size/2);\r\n                ctx.lineTo(laneX - enemyType.size/2, enemy.y);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n              } else if (enemy.type === 'boss') {\r\n                // Boss - estrella\r\n                ctx.beginPath();\r\n                for (let i = 0; i < 8; i++) {\r\n                  const angle = (i * Math.PI) / 4;\r\n                  const radius = i % 2 === 0 ? enemyType.size : enemyType.size / 2;\r\n                  const px = laneX + Math.cos(angle) * radius;\r\n                  const py = enemy.y + Math.sin(angle) * radius;\r\n                  if (i === 0) ctx.moveTo(px, py);\r\n                  else ctx.lineTo(px, py);\r\n                }\r\n                ctx.closePath();\r\n                ctx.fill();\r\n              } else {\r\n                // B치sico y Especial 1 - c칤rculo\r\n                ctx.arc(laneX, enemy.y, enemyType.size, 0, Math.PI * 2);\r\n                ctx.fill();\r\n              }\r\n              \r\n              ctx.shadowBlur = 0;\r\n              \r\n              // Borde del enemigo\r\n              ctx.strokeStyle = '#ffffff';\r\n              ctx.lineWidth = 1;\r\n              ctx.stroke();\r\n              \r\n              // NUEVA SECCI칍N: Solo n칰meros de vida arriba del enemigo\r\n              if (enemy.health && enemy.maxHealth) {\r\n                const healthY = enemy.y - enemyType.size - 15; // Arriba del enemigo\r\n                \r\n                // Fondo semi-transparente para el n칰mero\r\n                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\r\n                ctx.font = 'bold 12px Arial';\r\n                ctx.textAlign = 'center';\r\n                const textWidth = ctx.measureText(enemy.health).width;\r\n                ctx.fillRect(laneX - textWidth/2 - 3, healthY - 10, textWidth + 6, 14);\r\n                \r\n                // N칰mero de vida con color seg칰n porcentaje\r\n                const healthPercent = enemy.health / enemy.maxHealth;\r\n                if (healthPercent > 0.7) {\r\n                  ctx.fillStyle = '#00ff00'; // Verde\r\n                } else if (healthPercent > 0.4) {\r\n                  ctx.fillStyle = '#ffaa00'; // Amarillo\r\n                } else {\r\n                  ctx.fillStyle = '#ff4444'; // Rojo\r\n                }\r\n                \r\n                // Sombra del texto para mejor legibilidad\r\n                ctx.shadowColor = '#000000';\r\n                ctx.shadowBlur = 2;\r\n                ctx.shadowOffsetX = 1;\r\n                ctx.shadowOffsetY = 1;\r\n                \r\n                ctx.fillText(enemy.health, laneX, healthY);\r\n                \r\n                // Limpiar sombra\r\n                ctx.shadowBlur = 0;\r\n                ctx.shadowOffsetX = 0;\r\n                ctx.shadowOffsetY = 0;\r\n              }\r\n            }\r\n          });\r\n        }\r\n        \r\n        // Dibujar proyectiles de enemigos (sniper)\r\n        if (lane.enemyProjectiles && Array.isArray(lane.enemyProjectiles)) {\r\n          lane.enemyProjectiles.forEach(projectile => {\r\n            if (projectile.alive) {\r\n              // Proyectil del sniper - rojo\r\n              ctx.fillStyle = '#ff0066';\r\n              ctx.shadowColor = '#ff0066';\r\n              ctx.shadowBlur = 10;\r\n              ctx.beginPath();\r\n              ctx.arc(laneX, projectile.y, 4, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              \r\n              // N칰cleo brillante\r\n              ctx.fillStyle = '#ffffff';\r\n              ctx.beginPath();\r\n              ctx.arc(laneX - 1, projectile.y - 1, 2, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              ctx.shadowBlur = 0;\r\n            }\r\n          });\r\n        }\r\n        \r\n        // Dibujar balas de defensa\r\n        if (lane.bullets && Array.isArray(lane.bullets)) {\r\n          lane.bullets.forEach(bullet => {\r\n            if (bullet.alive) {\r\n              // Efecto de trail\r\n              ctx.fillStyle = 'rgba(255, 215, 0, 0.3)';\r\n              ctx.beginPath();\r\n              ctx.arc(laneX, bullet.y + 8, 6, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              \r\n              // Bala principal\r\n              ctx.fillStyle = '#ffd700';\r\n              ctx.shadowColor = '#ffd700';\r\n              ctx.shadowBlur = 12;\r\n              ctx.beginPath();\r\n              ctx.arc(laneX, bullet.y, 5, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              \r\n              // N칰cleo brillante\r\n              ctx.fillStyle = '#ffffff';\r\n              ctx.beginPath();\r\n              ctx.arc(laneX - 2, bullet.y - 2, 2, 0, Math.PI * 2);\r\n              ctx.fill();\r\n              ctx.shadowBlur = 0;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      // L칤nea de las bases con efecto ne칩n\r\n      ctx.strokeStyle = '#00ff88';\r\n      ctx.lineWidth = 4;\r\n      ctx.shadowColor = '#00ff88';\r\n      ctx.shadowBlur = 15;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, canvas.height - 80);\r\n      ctx.lineTo(canvas.width, canvas.height - 80);\r\n      ctx.stroke();\r\n      ctx.shadowBlur = 0;\r\n    };\r\n\r\n    drawGame();\r\n  }, [gameState]);\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getEnemyCount = () => {\r\n    return gameState.lanes.reduce((total, lane) => {\r\n      return total + (lane.enemies ? lane.enemies.length : 0);\r\n    }, 0);\r\n  };\r\n\r\n  const getActiveProjectiles = () => {\r\n    return gameState.lanes.reduce((total, lane) => {\r\n      return total + (lane.enemyProjectiles ? lane.enemyProjectiles.length : 0);\r\n    }, 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-viewport\">\r\n      <div className=\"game-container-vertical\">\r\n        {/* HUD Superior: Oleada */}\r\n        <div className=\"hud top-hud\">\r\n          <div className=\"hud-item\">\r\n            <span className=\"hud-label\">Oleada</span>\r\n            <span className=\"hud-value\">{gameState.waveSystem.currentWave}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Canvas del juego */}\r\n        <div className=\"game-canvas-container\">\r\n          <canvas\r\n            ref={canvasRef}\r\n            width={400}\r\n            height={600}\r\n            className=\"game-canvas-modern\"\r\n          />\r\n          \r\n          {/* Overlay de ganador */}\r\n          {gameState.globalGameOver && (\r\n            <div className=\"winner-overlay\">\r\n              {gameState.winner ? (\r\n                <>\r\n                  <h1 className=\"winner-title\">游끥 춰VICTORIA!</h1>\r\n                  <h2 className=\"winner-subtitle\">Jugador {gameState.winner} Sobrevive</h2>\r\n                  <p className=\"winner-score\">Oleadas Completadas: {gameState.waveSystem.currentWave}</p>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <h1 className=\"winner-title\">游 ANIQUILACI칍N TOTAL</h1>\r\n                  <h2 className=\"winner-subtitle\">Todos los defensores han ca칤do</h2>\r\n                  <p className=\"winner-score\">Oleadas Resistidas: {gameState.waveSystem.currentWave}</p>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* HUD Inferior: Tiempo */}\r\n        <div className=\"hud bottom-hud\">\r\n          <div className=\"hud-item\">\r\n            <span className=\"hud-label\">Tiempo</span>\r\n            <span className=\"hud-value\">{formatTime(gameState.waveSystem.timeRemaining)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GamePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}